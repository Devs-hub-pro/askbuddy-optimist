
<!-- Location Selector Component -->
<view class="flex items-center space-x-1 text-slate-800 font-medium" bindtap="toggleLocationMenu">
  <image src="/assets/icons/map-pin.png" style="width: 18px; height: 18px;" />
  <text>{{location}}</text>
  <image src="/assets/icons/chevron-down.png" style="width: 16px; height: 16px; transform: {{locationMenuOpen ? 'rotate(180deg)' : 'rotate(0deg)'}};" />
</view>

<view wx:if="{{locationMenuOpen}}" class="absolute top-12 right-0 w-40 bg-white rounded-md shadow-md p-2 animate-scale z-10">
  <view class="flex flex-col space-y-1">
    <!-- 最近访问的城市 -->
    <block wx:if="{{recentCities && recentCities.length > 0}}">
      <view class="text-xs text-gray-500 px-3 py-1">最近访问</view>
      <block wx:for="{{recentCities}}" wx:key="*this">
        <view 
          class="w-full text-left px-3 py-2 rounded-md text-sm {{item === location ? 'bg-blue-50 text-app-blue' : ''}}"
          bindtap="selectLocation"
          data-city="{{item}}"
        >
          {{item}}
        </view>
      </block>
      <view class="w-full h-px bg-gray-100 my-1"></view>
    </block>
    
    <!-- 热门城市 -->
    <view class="text-xs text-gray-500 px-3 py-1">热门城市</view>
    <block wx:for="{{cities}}" wx:key="*this">
      <view 
        class="w-full text-left px-3 py-2 rounded-md text-sm {{item === location ? 'bg-blue-50 text-app-blue' : ''}}"
        bindtap="selectLocation"
        data-city="{{item}}"
      >
        {{item}}
      </view>
    </block>
    
    <!-- 更多城市按钮 -->
    <view class="w-full h-px bg-gray-100 my-1"></view>
    <view 
      class="w-full text-left px-3 py-2 rounded-md text-sm bg-gray-50 flex items-center justify-between"
      bindtap="showCitySelector"
    >
      <text>查看全部城市和国家</text>
      <image src="/assets/icons/chevron-right.png" style="width: 16px; height: 16px;" />
    </view>
  </view>
</view>
