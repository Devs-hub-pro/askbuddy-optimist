
<!-- Question Tabs Component -->
<view class="px-4 mb-6">
  <view class="flex items-center justify-between mb-4">
    <view 
      class="{{activeTab === 'topics' ? 'font-bold text-lg animate-fade-in text-app-text border-b-2 border-app-blue' : 'font-bold text-lg animate-fade-in text-gray-400'}} pb-1"
      bindtap="switchTab"
      data-tab="topics"
    >
      大家都在问
    </view>
    <view 
      class="{{activeTab === 'experts' ? 'font-bold text-lg animate-fade-in text-app-text border-b-2 border-app-blue' : 'font-bold text-lg animate-fade-in text-gray-400'}} pb-1"
      bindtap="switchTab"
      data-tab="experts"
    >
      找TA问问
    </view>
  </view>
  
  <block wx:if="{{isLoading}}">
    <view class="space-y-4">
      <block wx:for="{{[1, 2, 3]}}" wx:key="*this">
        <view class="bg-white rounded-lg p-4 animate-pulse-soft">
          <view class="h-5 bg-gray-200 rounded w-3/4 mb-3"></view>
          <view class="flex items-center space-x-2 mb-3">
            <view class="w-8 h-8 bg-gray-200 rounded-full"></view>
            <view>
              <view class="h-3 bg-gray-200 rounded w-24"></view>
              <view class="h-3 bg-gray-200 rounded w-16 mt-1"></view>
            </view>
          </view>
          <view class="flex space-x-2">
            <view class="h-4 bg-gray-200 rounded w-12"></view>
            <view class="h-4 bg-gray-200 rounded w-12"></view>
          </view>
        </view>
      </block>
    </view>
  </block>
  
  <block wx:else>
    <block wx:if="{{activeTab === 'topics'}}">
      <view class="space-y-3">
        <block wx:for="{{questions}}" wx:key="id">
          <view class="question-card bg-white rounded-lg p-4 animate-fade-in" style="animation-delay: {{0.4 + index * 0.1}}s" bindtap="viewQuestionDetail" data-id="{{item.id}}">
            <!-- Question header with avatar and title -->
            <view class="flex items-start mb-3">
              <view class="flex-shrink-0 mr-3">
                <image class="rounded-full w-10 h-10" src="{{item.asker.avatar}}" mode="aspectFill"/>
              </view>
              <view class="flex-1">
                <view class="flex items-center justify-between">
                  <text class="font-semibold text-base">{{item.title}}</text>
                  <view class="flex items-center">
                    <image src="/assets/icons/eye.png" class="w-4 h-4 mr-1" />
                    <text class="text-gray-500 text-sm">{{item.viewCount}}</text>
                  </view>
                </view>
              </view>
            </view>

            <!-- Question description -->
            <view class="ml-13 mb-4">
              <text class="text-gray-700 text-sm line-clamp-2">{{item.description}}</text>
            </view>
            
            <!-- Tags -->
            <view class="flex flex-wrap gap-2 mb-4">
              <block wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">
                <text class="tag-green">#{{tag}}</text>
              </block>
            </view>
            
            <!-- Answer status -->
            <view class="flex items-center justify-between">
              <view class="flex items-center">
                <image class="w-5 h-5 rounded-full" src="{{item.answerAvatar || '/assets/icons/user-avatar.png'}}" mode="aspectFill"/>
                <text class="text-sm text-gray-700 ml-1">{{item.answerName || '待回答'}}</text>
                <view class="flex items-center ml-2">
                  <image src="/assets/icons/sun.png" class="w-4 h-4 text-yellow-500" />
                  <text class="text-sm text-green-500 ml-1">{{item.points}}</text>
                </view>
              </view>
              
              <view catchtap="handleAnswer" data-id="{{item.id}}" class="answer-btn">
                我来回答
              </view>
            </view>
          </view>
        </block>
      </view>
    </block>
    
    <block wx:else>
      <view class="space-y-3">
        <block wx:for="{{experts || questions}}" wx:key="id">
          <view class="expert-card bg-white rounded-lg p-4 mb-3 animate-fade-in" style="animation-delay: {{0.4 + index * 0.1}}s" bindtap="viewExpertProfile" data-id="{{item.id}}">
            <view class="flex items-center mb-3">
              <image class="w-10 h-10 rounded-full" src="{{item.avatar || item.asker.avatar}}" mode="aspectFill" />
              <view class="ml-3">
                <text class="font-semibold block">{{item.name || item.asker.name}}</text>
                <text class="text-xs text-green-600 block">{{item.title || ''}}</text>
              </view>
            </view>
            
            <text class="text-sm text-gray-700 block mb-3">{{item.description || item.title}}</text>
            
            <view class="flex flex-wrap gap-1 mb-3">
              <block wx:for="{{item.tags}}" wx:for-item="tag" wx:key="*this">
                <text class="tag">#{{tag}}</text>
              </block>
            </view>
            
            <view class="flex justify-end">
              <view class="px-3 py-1 bg-gradient-to-r from-green-500 to-teal-400 text-white rounded-full text-xs flex items-center">
                <image src="/assets/icons/message.png" class="w-3 h-3 mr-1" />
                找我问问
              </view>
            </view>
          </view>
        </block>
      </view>
    </block>
  </block>
</view>
